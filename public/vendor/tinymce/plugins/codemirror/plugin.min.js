tinymce.PluginManager.requireLangPack("codemirror"),tinymce.PluginManager.add("codemirror",function(e,o){function r(){e.focus(),e.selection.collapse(!0),codemirrorWidth=800,e.settings.codemirror.width&&(codemirrorWidth=e.settings.codemirror.width),codemirrorHeight=550,e.settings.codemirror.width&&(codemirrorHeight=e.settings.codemirror.height);var r={title:"HTML source code",url:o+"/source.html",width:codemirrorWidth,height:codemirrorHeight,resizable:!0,maximizable:!0,fullScreen:e.settings.codemirror.fullscreen,buttons:[{text:"Ok",subtype:"primary",onclick:function(){document.querySelectorAll(".mce-container-body>iframe")[0].contentWindow.submit(),i.close()}},{text:"Cancel",onclick:"close"}]},i=e.windowManager.open(r);e.settings.codemirror.fullscreen&&i.fullscreen(!0)}e.addButton("code",{title:"Source code",icon:"code",onclick:r}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:r})});